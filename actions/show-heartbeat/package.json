{
    "name": "show-heartbeat",
    "version": "0.0.1",
    "private": true,
    "main": "./index.js",
    "normandy": {
        "driverVersion": "1.x",
        "argumentsSchema": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "title": "Show a Heartbeat survey.",
            "description": "This action can show a single survey, or choose a single survey from multiple weighted ones.",

            "type": "object",
            "required": [
                "surveys"
            ],
            "properties": {
                "defaults": {
                    "$ref": "#/definitions/survey",
                    "title": "Default values",
                    "description": "Default values used for missing values in the list of surveys"
                },
                "surveys": {
                    "type": "array",
                    "format": "tabs",
                    "minItems": 1,
                    "items": {
                        "$ref": "#/definitions/weightedSurvey",
                        "headerTemplate": "Survey {{ self.title }}"
                    }
                }
            },

            "definitions": {
                "title": {
                    "description": "Descriptive title. Not shown to users",
                    "type": "string",
                    "default": ""
                },
                "message": {
                    "description": "Message to show to the user",
                    "type": "string",
                    "default": ""
                },
                "thanksMessage": {
                    "description": "Thanks message to show to the user after they've rated Firefox",
                    "type": "string",
                    "default": ""
                },
                "postAnswerUrl": {
                    "description": "URL to redirect the user to after rating Firefox",
                    "type": "string",
                    "default": ""
                },
                "learnMoreMessage": {
                    "description": "Message to show to the user to learn more",
                    "type": "string",
                    "default": ""
                },
                "learnMoreUrl": {
                    "description": "URL to show to the user when they click Learn More",
                    "type": "string",
                    "default": ""
                },
                "survey": {
                    "type": "object",
                    "properties": {
                        "title": {"$ref": "#/definitions/title"},
                        "message": {"$ref": "#/definitions/message"},
                        "thanksMessage": {"$ref": "#/definitions/thanksMessage"},
                        "postAnswerUrl": {"$ref": "#/definitions/postAnswerUrl"},
                        "learnMoreMessage": {"$ref": "#/definitions/learnMoreMessage"},
                        "learnMoreUrl": {"$ref": "#/definitions/learnMoreUrl"}
                    }
                },
                "weightedSurvey": {
                    "allOf": [
                        {"$ref": "#/definitions/survey"},
                        {
                            "properties": {
                                "weight": {
                                    "type": "integer",
                                    "description": "Frequency relative to other surveys",
                                    "minimum": 1,
                                    "default": 1
                                }
                            },
                            "required": ["weight"]
                        }
                    ]
                }
            }
        }
    }
}
